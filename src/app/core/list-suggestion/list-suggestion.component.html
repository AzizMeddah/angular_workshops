<div class="suggestions-container">
  <!-- Section des Favoris -->
  <div class="favorites-section" *ngIf="favorites.length > 0">
    <h2 class="title favorites-title">Mes Favoris ({{ favorites.length }})</h2>
    <div class="favorites-list">
      <div *ngFor="let favorite of favorites" class="favorite-item">
        <div class="favorite-content">
          <h4 class="favorite-title">{{ favorite.title }}</h4>
          <span class="favorite-category">{{ favorite.category }}</span>
        </div>
        <button class="remove-favorite" (click)="toggleFavorite(favorite)" title="Retirer des favoris">
          X
        </button>
      </div>
    </div>
  </div>

  <h2 class="title">Liste des Suggestions</h2>

  <!-- Barre de recherche -->
  <div class="search-container">
    <div class="search-box">
      <span class="search-icon"></span>
      <input
        type="text"
        class="search-input"
        placeholder="Rechercher par titre ou catégorie..."
        [(ngModel)]="searchTerm"
      />
      <button
        class="clear-search"
        *ngIf="searchTerm"
        (click)="clearSearch()"
        title="Effacer la recherche">
        X
      </button>
    </div>
    <div class="search-info" *ngIf="searchTerm">
      <span class="results-count">
        {{ filteredSuggestions.length }} résultat(s) trouvé(s)
      </span>
    </div>
  </div>

  <div class="suggestions-grid">
    <div *ngFor="let suggestion of filteredSuggestions" class="suggestion-card">
      <div class="card-header">
        <h3 class="suggestion-title">{{ suggestion.title }}</h3>
        <span class="suggestion-status" [ngClass]="'status-' + suggestion.status">
          {{ getStatusLabel(suggestion.status) }}
        </span>
      </div>

      <div class="card-body">
        <p class="suggestion-description">{{ suggestion.description }}</p>

        <div class="suggestion-meta">
          <span class="category">
            <i class="icon-category"></i>
            {{ suggestion.category }}
          </span>
          <span class="date">
            <i class="icon-date"></i>
            {{ suggestion.date | date: 'dd/MM/yyyy' }}
          </span>
        </div>
      </div>

      <div class="card-footer" *ngIf="suggestion.status !== 'refusee'">
        <div class="action-buttons">
          <button class="like-button" (click)="likeSuggestion(suggestion.id)">
            <span class="heart-icon"></span>
            <span class="button-text">Like</span>
            <span class="likes-count">({{ suggestion.nbLikes }})</span>
          </button>

          <button
            class="favorite-button"
            [ngClass]="{'is-favorite': isFavorite(suggestion.id)}"
            (click)="toggleFavorite(suggestion)">
            <span class="star-icon">{{ isFavorite(suggestion.id) ? '*' : '' }}</span>
            <span class="button-text">{{ isFavorite(suggestion.id) ? 'Retirer des favoris' : 'Ajouter aux favoris' }}</span>
          </button>
        </div>
      </div>

      <div class="card-footer card-footer-refused" *ngIf="suggestion.status === 'refusee'">
        <p class="refused-message">Cette suggestion a été refusée</p>
      </div>
    </div>
  </div>

  <div *ngIf="filteredSuggestions.length === 0 && searchTerm" class="no-suggestions">
    <p>Aucune suggestion ne correspond à votre recherche.</p>
    <button class="reset-search-btn" (click)="clearSearch()">Réinitialiser la recherche</button>
  </div>

  <div *ngIf="suggestions.length === 0 && !searchTerm" class="no-suggestions">
    <p>Aucune suggestion disponible pour le moment.</p>
  </div>
</div>

